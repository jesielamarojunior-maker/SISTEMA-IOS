<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema IOS - Teste Frontend</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-result { margin: 10px 0; padding: 10px; border-radius: 5px; }
        .success { background-color: #d4edda; color: #155724; }
        .error { background-color: #f8d7da; color: #721c24; }
        .info { background-color: #d1ecf1; color: #0c5460; }
        button { margin: 5px; padding: 10px 15px; }
    </style>
</head>
<body>
    <h1>ğŸ§ª Sistema IOS - Teste Frontend</h1>
    <div id="results"></div>
    
    <h2>Testes Manuais</h2>
    <button onclick="testLogin()">Testar Login</button>
    <button onclick="testNavigation()">Testar NavegaÃ§Ã£o</button>
    <button onclick="testForms()">Testar FormulÃ¡rios</button>
    <button onclick="testEnhancedFeatures()">Testar Funcionalidades Melhoradas</button>
    
    <h2>AplicaÃ§Ã£o IOS</h2>
    <iframe id="iosFrame" src="http://localhost:8000" width="100%" height="800px" style="border: 1px solid #ccc;"></iframe>

    <script>
        function addResult(message, type = 'info') {
            const results = document.getElementById('results');
            const div = document.createElement('div');
            div.className = `test-result ${type}`;
            div.innerHTML = `${new Date().toLocaleTimeString()} - ${message}`;
            results.appendChild(div);
        }

        function testLogin() {
            addResult('ğŸ” Testando sistema de login...', 'info');
            
            const iframe = document.getElementById('iosFrame');
            try {
                const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                
                // Verificar se elementos de login existem
                const emailField = iframeDoc.getElementById('email');
                const passwordField = iframeDoc.getElementById('password');
                const userTypeField = iframeDoc.getElementById('userType');
                const loginButton = iframeDoc.querySelector('.btn-login');
                
                if (emailField && passwordField && userTypeField && loginButton) {
                    addResult('âœ… Elementos de login encontrados', 'success');
                    
                    // Testar preenchimento automÃ¡tico
                    emailField.value = 'admin@ios.org.br';
                    passwordField.value = 'admin123';
                    userTypeField.value = 'admin';
                    
                    addResult('âœ… Campos preenchidos automaticamente', 'success');
                    addResult('â„¹ï¸ Clique no botÃ£o "Entrar no sistema" para testar o login', 'info');
                } else {
                    addResult('âŒ Elementos de login nÃ£o encontrados', 'error');
                }
            } catch (e) {
                addResult(`âŒ Erro ao acessar iframe: ${e.message}`, 'error');
            }
        }

        function testNavigation() {
            addResult('ğŸ” Testando navegaÃ§Ã£o...', 'info');
            
            const iframe = document.getElementById('iosFrame');
            try {
                const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                
                // Verificar se abas de navegaÃ§Ã£o existem
                const navTabs = iframeDoc.querySelectorAll('.nav-tab');
                if (navTabs.length > 0) {
                    addResult(`âœ… ${navTabs.length} abas de navegaÃ§Ã£o encontradas`, 'success');
                    
                    const tabNames = Array.from(navTabs).map(tab => tab.textContent.trim());
                    addResult(`ğŸ“‹ Abas: ${tabNames.join(', ')}`, 'info');
                } else {
                    addResult('âŒ Abas de navegaÃ§Ã£o nÃ£o encontradas', 'error');
                }
            } catch (e) {
                addResult(`âŒ Erro ao testar navegaÃ§Ã£o: ${e.message}`, 'error');
            }
        }

        function testForms() {
            addResult('ğŸ” Testando formulÃ¡rios...', 'info');
            
            const iframe = document.getElementById('iosFrame');
            try {
                const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                
                // Verificar formulÃ¡rio melhorado de turmas
                const enhancedClassForm = iframeDoc.getElementById('enhancedClassForm');
                if (enhancedClassForm) {
                    addResult('âœ… FormulÃ¡rio melhorado de turmas encontrado', 'success');
                    
                    // Verificar campos especÃ­ficos
                    const requiredFields = [
                        'className', 'classUnit', 'classCourse', 
                        'classInstructorId', 'classMonitorId', 'classPedagogueId'
                    ];
                    
                    let foundFields = 0;
                    requiredFields.forEach(fieldId => {
                        if (iframeDoc.getElementById(fieldId)) {
                            foundFields++;
                        }
                    });
                    
                    addResult(`âœ… ${foundFields}/${requiredFields.length} campos do formulÃ¡rio encontrados`, 'success');
                } else {
                    addResult('âŒ FormulÃ¡rio melhorado de turmas nÃ£o encontrado', 'error');
                }
                
                // Verificar formulÃ¡rio de estudantes
                const studentFields = ['studentClass', 'studentName', 'studentCpf'];
                let studentFieldsFound = 0;
                studentFields.forEach(fieldId => {
                    if (iframeDoc.getElementById(fieldId)) {
                        studentFieldsFound++;
                    }
                });
                
                if (studentFieldsFound === studentFields.length) {
                    addResult('âœ… FormulÃ¡rio de estudantes com CPF encontrado', 'success');
                } else {
                    addResult(`âš ï¸ FormulÃ¡rio de estudantes incompleto: ${studentFieldsFound}/${studentFields.length}`, 'error');
                }
                
            } catch (e) {
                addResult(`âŒ Erro ao testar formulÃ¡rios: ${e.message}`, 'error');
            }
        }

        function testEnhancedFeatures() {
            addResult('ğŸ” Testando funcionalidades melhoradas...', 'info');
            
            const iframe = document.getElementById('iosFrame');
            try {
                const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                const iframeWindow = iframe.contentWindow;
                
                // Verificar se funÃ§Ãµes melhoradas existem
                const enhancedFunctions = [
                    'addEnhancedClass',
                    'addEnhancedStudent', 
                    'loadEnhancedClasses',
                    'fillInstructorData',
                    'fillMonitorData',
                    'fillPedagogueData'
                ];
                
                let functionsFound = 0;
                enhancedFunctions.forEach(funcName => {
                    if (typeof iframeWindow[funcName] === 'function') {
                        functionsFound++;
                    }
                });
                
                addResult(`âœ… ${functionsFound}/${enhancedFunctions.length} funÃ§Ãµes melhoradas encontradas`, 'success');
                
                // Verificar estrutura de equipe
                const teamSections = iframeDoc.querySelectorAll('.team-member-group');
                if (teamSections.length >= 3) {
                    addResult('âœ… SeÃ§Ãµes de equipe (Professor, Monitor, Pedagoga) encontradas', 'success');
                } else {
                    addResult(`âš ï¸ SeÃ§Ãµes de equipe incompletas: ${teamSections.length}/3`, 'error');
                }
                
                // Verificar seÃ§Ãµes de horÃ¡rio
                const scheduleSections = iframeDoc.querySelectorAll('.schedule-group');
                if (scheduleSections.length >= 2) {
                    addResult('âœ… SeÃ§Ãµes de horÃ¡rio (Principal + ExtensÃ£o) encontradas', 'success');
                } else {
                    addResult(`âš ï¸ SeÃ§Ãµes de horÃ¡rio incompletas: ${scheduleSections.length}/2`, 'error');
                }
                
            } catch (e) {
                addResult(`âŒ Erro ao testar funcionalidades melhoradas: ${e.message}`, 'error');
            }
        }

        // Auto-executar alguns testes quando a pÃ¡gina carregar
        window.addEventListener('load', function() {
            setTimeout(() => {
                addResult('ğŸš€ Sistema de teste carregado', 'success');
                addResult('â„¹ï¸ Use os botÃµes acima para testar diferentes funcionalidades', 'info');
            }, 1000);
        });
    </script>
</body>
</html>